import{z as i,A as S,B as n,v as o,L as w,E as C,H as l,V as f,aG as rt,r as P,ab as N,n as I,C as y,F as D,D as ut,G as p,aE as F}from"./index-z3SSRu3n.js";import{V as b,a as v}from"./VRow-BmcBD9mr.js";import{b as T,V as z,a as it,_ as ct}from"./VCard-BJQiZ9OI.js";import{e as R,o as j,f as G}from"./cartstore-B0NisZ3b.js";import{p as dt}from"./productstore-CGX6BY7K.js";import{s as H,h as g,g as B,r as pt,_ as mt}from"./AppNav-BBMY4ITW.js";const _t={__name:"EmptyCartView",setup(x){const r=()=>{rt.push("/boutique")};return(d,s)=>(i(),S(z,{class:"text-center"},{default:n(()=>[o(b,{justify:"center"},{default:n(()=>[o(v,{cols:"12",sm:"8",md:"6"},{default:n(()=>[o(T,{elevation:"3",class:"pa-8"},{default:n(()=>[o(w,{size:"64",color:"red"},{default:n(()=>s[0]||(s[0]=[C("mdi-cart-off")])),_:1}),s[2]||(s[2]=l("h2",{class:"mt-4"},"Nothing Here!!",-1)),s[3]||(s[3]=l("p",{class:"mt-2"}," Add something to checkout ",-1)),o(f,{color:"secondary",class:"mt-4",outlined:"",onClick:r},{default:n(()=>s[1]||(s[1]=[C("Go Back to Shop")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},ft={class:"d-flex py-2 justify-end"},Ct={class:"mb-1"},gt={class:"grey--text mb-0"},vt={class:"mx-2"},yt={class:"mx-4"},St={class:"font-weight-black"},xt={__name:"LoadedCartView",setup(x){const r=R(),d=dt(),s=H(),u=P(null),V=P([]),m=P([]);N(()=>{j(G,t=>{t?(u.value=t,s.setUser(t),r.fetchCartItems(t)):(u.value=null,s.setUser(null),V.value=[])})});const h=async(t,e)=>{await r.addToCart(t,e)},$=async(t,e)=>{await r.decreaseQuantity(t,e)},Q=async(t,e)=>{await r.removeItemFromCart(t,e)},U=async t=>{await r.clearCart(t)},M=I(()=>r.getCartCount),J=I(()=>(K(),m.value)),_=t=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(t),K=()=>{const t=r.getCartList(),e=d.retrieveProductList();let a=[],c=[];e.then(at=>{c=at,t.forEach(k=>{let L=c.find(lt=>lt.priceId==k.priceId);k.name=L.name,k.unit_price=L.priceInfo.unit_amount/100,k.image_link=L.images[0],a.push(k)}),m.value=a})};function O(t){let e=m.value.find(a=>a.priceId==t);return e.quantity*e.unit_price}function W(t){let e=O(t);return _(e)}const X=()=>m.value.reduce((t,e)=>t+e.unit_price*e.quantity,0),Y=I(()=>{let t=X();return _(t)});function A(){return m.value.reduce((a,c)=>a+c.unit_price*c.quantity,0)*.1}function Z(){let t=A();return _(t)}function q(){return m.value.reduce((a,c)=>a+c.unit_price*c.quantity,0)*.16}function tt(){let t=q();return _(t)}function E(){return 10}function et(){let t=E();return _(t)}function nt(){return m.value.reduce((e,a)=>e+a.unit_price*a.quantity,0)+E()+q()-A()}const ot=I(()=>{let t=nt();return _(t)});async function st(t){await r.executeCheckout(t)}return(t,e)=>(i(),y(D,null,[l("div",ft,[o(f,{color:"warning",onClick:e[0]||(e[0]=a=>U(u.value))},{default:n(()=>[o(w,null,{default:n(()=>e[2]||(e[2]=[C("mdi-cart-remove")])),_:1})]),_:1})]),o(T,{class:"mx-auto"},{default:n(()=>[(i(!0),y(D,null,ut(J.value,a=>(i(),S(g,{class:"w-100"},{default:n(()=>[o(b,{class:"pa-2"},{default:n(()=>[o(v,{cols:"3"},{default:n(()=>[o(it,{src:a.image_link,alt:"Product Image",width:100,"aspect-ratio":"1",cover:""},null,8,["src"])]),_:2},1024),o(v,{cols:"9"},{default:n(()=>[o(b,null,{default:n(()=>[o(v,{cols:"12"},{default:n(()=>[l("h4",Ct,p(a.name),1),l("p",gt,p(_(a.unit_price)),1)]),_:2},1024),o(v,{cols:"12",class:"d-flex align-center justify-end"},{default:n(()=>[o(f,{icon:"mdi-minus",onClick:c=>$(u.value,a.priceId),size:"xx-small"},null,8,["onClick"]),l("span",vt,p(a.quantity),1),o(f,{icon:"mdi-plus",onClick:c=>h(u.value,a.priceId),size:"xx-small"},null,8,["onClick"]),l("div",yt,[l("span",null,p(W(a.priceId)),1)]),o(f,{color:"warning",onClick:c=>Q(u.value,a.priceId)},{default:n(()=>[o(w,null,{default:n(()=>e[3]||(e[3]=[C("mdi-delete")])),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),o(B)]),_:2},1024))),256))]),_:1}),o(T,{class:"my-2 mx-auto"},{actions:n(()=>[o(f,{"append-icon":"mdi-chevron-right",onClick:e[1]||(e[1]=a=>st(u.value)),color:"red-lighten-2",text:"Checkout",variant:"outlined",block:""})]),default:n(()=>[o(g,null,{title:n(()=>e[4]||(e[4]=[l("span",null,"Subtotal",-1)])),append:n(()=>[l("span",null,p(Y.value),1)]),_:1}),o(g,null,{title:n(()=>e[5]||(e[5]=[l("span",null,"Discount",-1)])),append:n(()=>[l("span",null,"- "+p(Z()),1)]),_:1}),o(g,null,{title:n(()=>e[6]||(e[6]=[l("span",null,"Shipping & Handling",-1)])),append:n(()=>[l("span",null,p(et()),1)]),_:1}),o(g,null,{title:n(()=>e[7]||(e[7]=[l("span",null,"Tax",-1)])),append:n(()=>[l("span",null,p(tt()),1)]),_:1}),o(B),o(g,null,{title:n(()=>[e[8]||(e[8]=l("span",{class:"font-weight-black"},"Subtotal",-1)),C(" - "+p(M.value)+" Item(s) ",1)]),append:n(()=>[l("span",St,p(ot.value),1)]),_:1})]),_:1})],64))}},kt={__name:"UnsignedCartView",setup(x){const r=pt();return(d,s)=>(i(),S(z,{class:"text-center"},{default:n(()=>[o(b,{justify:"center"},{default:n(()=>[o(v,{cols:"12",sm:"8",md:"6"},{default:n(()=>[o(T,{elevation:"3",class:"pa-8"},{default:n(()=>[o(w,{size:"64",color:"red"},{default:n(()=>s[1]||(s[1]=[C("mdi-account-question-outline")])),_:1}),s[3]||(s[3]=l("h2",{class:"mt-4"},"Not Authenticated",-1)),s[4]||(s[4]=l("p",{class:"mt-2"}," Please log in to access your cart.... ",-1)),o(f,{color:"primary",class:"mt-4",onClick:s[0]||(s[0]=u=>F(r).openDialog(1))},{default:n(()=>s[2]||(s[2]=[C("Sign In")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},It={class:"ma-2"},Vt={key:0},wt={key:1},bt={__name:"CartSection",setup(x){const r=R(),d=H();N(()=>{j(G,u=>{u?(d.setUser(u),r.fetchCartItems(u)):d.setUser(null)})});const s=I(()=>r.getCartCount);return(u,V)=>{const m=kt,h=xt,$=_t;return i(),y("div",It,[V[0]||(V[0]=l("div",{class:"py-6"},[l("h1",null,"Shopping Cart")],-1)),F(d).user?(i(),y("div",wt,[s.value>0?(i(),S(h,{key:0})):(i(),S($,{key:1}))])):(i(),y("div",Vt,[o(m)]))])}}},Tt={};function ht(x,r){const d=mt,s=bt;return i(),y(D,null,[o(d),o(s)],64)}const $t=ct(Tt,[["render",ht]]),Bt={__name:"shopping-cart",setup(x){return(r,d)=>{const s=$t;return i(),S(s)}}};export{Bt as default};
